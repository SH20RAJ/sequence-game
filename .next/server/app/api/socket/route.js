/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/socket/route";
exports.ids = ["app/api/socket/route"];
exports.modules = {

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("@prisma/client");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "querystring":
/*!******************************!*\
  !*** external "querystring" ***!
  \******************************/
/***/ ((module) => {

"use strict";
module.exports = require("querystring");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "timers":
/*!*************************!*\
  !*** external "timers" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("timers");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tls");

/***/ }),

/***/ "tty":
/*!**********************!*\
  !*** external "tty" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("tty");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?32c4":
/*!****************************!*\
  !*** bufferutil (ignored) ***!
  \****************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "?66e9":
/*!********************************!*\
  !*** utf-8-validate (ignored) ***!
  \********************************/
/***/ (() => {

/* (ignored) */

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsocket%2Froute&page=%2Fapi%2Fsocket%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsocket%2Froute.ts&appDir=%2FUsers%2Fshaswatraj%2FDesktop%2Fopen-source%2Fsequence%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaswatraj%2FDesktop%2Fopen-source%2Fsequence&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsocket%2Froute&page=%2Fapi%2Fsocket%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsocket%2Froute.ts&appDir=%2FUsers%2Fshaswatraj%2FDesktop%2Fopen-source%2Fsequence%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaswatraj%2FDesktop%2Fopen-source%2Fsequence&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_shaswatraj_Desktop_open_source_sequence_src_app_api_socket_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/socket/route.ts */ \"(rsc)/./src/app/api/socket/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/socket/route\",\n        pathname: \"/api/socket\",\n        filename: \"route\",\n        bundlePath: \"app/api/socket/route\"\n    },\n    resolvedPagePath: \"/Users/shaswatraj/Desktop/open-source/sequence/src/app/api/socket/route.ts\",\n    nextConfigOutput,\n    userland: _Users_shaswatraj_Desktop_open_source_sequence_src_app_api_socket_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/socket/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZzb2NrZXQlMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnNvY2tldCUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnNvY2tldCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnNoYXN3YXRyYWolMkZEZXNrdG9wJTJGb3Blbi1zb3VyY2UlMkZzZXF1ZW5jZSUyRnNyYyUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZzaGFzd2F0cmFqJTJGRGVza3RvcCUyRm9wZW4tc291cmNlJTJGc2VxdWVuY2UmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQzBCO0FBQ3ZHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VxdWVuY2UtZ2FtZS8/ZjQzNiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvc2hhc3dhdHJhai9EZXNrdG9wL29wZW4tc291cmNlL3NlcXVlbmNlL3NyYy9hcHAvYXBpL3NvY2tldC9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc29ja2V0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc29ja2V0XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9zb2NrZXQvcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvc2hhc3dhdHJhai9EZXNrdG9wL29wZW4tc291cmNlL3NlcXVlbmNlL3NyYy9hcHAvYXBpL3NvY2tldC9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvc29ja2V0L3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsocket%2Froute&page=%2Fapi%2Fsocket%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsocket%2Froute.ts&appDir=%2FUsers%2Fshaswatraj%2FDesktop%2Fopen-source%2Fsequence%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaswatraj%2FDesktop%2Fopen-source%2Fsequence&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/socket/route.ts":
/*!*************************************!*\
  !*** ./src/app/api/socket/route.ts ***!
  \*************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var socket_io__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! socket.io */ \"(rsc)/./node_modules/socket.io/wrapper.mjs\");\n/* harmony import */ var _lib_prisma__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/prisma */ \"(rsc)/./src/lib/prisma.ts\");\n/* harmony import */ var _utils_game__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/utils/game */ \"(rsc)/./src/utils/game.ts\");\n\n\n\n// Store active games in memory\nconst activeGames = new Map();\n// Socket.io server\nconst io = new socket_io__WEBPACK_IMPORTED_MODULE_0__.Server({\n    path: \"/api/socket\"\n});\nio.on(\"connection\", (socket)=>{\n    console.log(\"Client connected:\", socket.id);\n    // Join a room\n    socket.on(\"joinRoom\", async ({ roomCode })=>{\n        try {\n            socket.join(roomCode);\n            // Get game data from database\n            const game = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].game.findUnique({\n                where: {\n                    roomCode\n                },\n                include: {\n                    host: true,\n                    playerToGame: {\n                        include: {\n                            player: true\n                        }\n                    },\n                    gameState: true\n                }\n            });\n            if (!game) {\n                socket.emit(\"error\", {\n                    message: \"Room not found\"\n                });\n                return;\n            }\n            // Format players data\n            const players = game.playerToGame.map((ptg)=>({\n                    id: ptg.player.id,\n                    name: ptg.player.name,\n                    isHost: ptg.player.id === game.hostId,\n                    hand: []\n                }));\n            // Get or initialize game state\n            let gameState = null;\n            if (game.gameState) {\n                gameState = {\n                    status: game.status,\n                    board: game.gameState.board,\n                    currentTurn: game.gameState.currentTurn,\n                    player1: {\n                        id: players[0]?.id,\n                        sequences: game.gameState.sequences.filter((s)=>s.player === \"player1\")\n                    },\n                    player2: {\n                        id: players[1]?.id,\n                        sequences: game.gameState.sequences.filter((s)=>s.player === \"player2\")\n                    },\n                    winner: game.gameState.winner\n                };\n                // If game is in progress, get player hands\n                if (game.status === \"playing\") {\n                    const player1Hand = game.gameState.player1Hand;\n                    const player2Hand = game.gameState.player2Hand;\n                    // Find the current player\n                    const currentPlayerIndex = players.findIndex((p)=>p.id === socket.id);\n                    if (currentPlayerIndex === 0) {\n                        players[0].hand = player1Hand;\n                    } else if (currentPlayerIndex === 1) {\n                        players[1].hand = player2Hand;\n                    }\n                }\n            }\n            // Send room data to the client\n            socket.emit(\"roomData\", {\n                players,\n                gameState,\n                currentPlayer: players.find((p)=>p.id === socket.id)\n            });\n            // Notify other clients in the room\n            socket.to(roomCode).emit(\"playerJoined\", {\n                players\n            });\n        } catch (error) {\n            console.error(\"Error joining room:\", error);\n            socket.emit(\"error\", {\n                message: \"Failed to join room\"\n            });\n        }\n    });\n    // Start the game\n    socket.on(\"startGame\", async ({ roomCode })=>{\n        try {\n            // Get game data from database\n            const game = await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].game.findUnique({\n                where: {\n                    roomCode\n                },\n                include: {\n                    playerToGame: {\n                        include: {\n                            player: true\n                        }\n                    }\n                }\n            });\n            if (!game) {\n                socket.emit(\"error\", {\n                    message: \"Room not found\"\n                });\n                return;\n            }\n            if (game.hostId !== socket.id) {\n                socket.emit(\"error\", {\n                    message: \"Only the host can start the game\"\n                });\n                return;\n            }\n            if (game.playerToGame.length < 2) {\n                socket.emit(\"error\", {\n                    message: \"Need at least 2 players to start\"\n                });\n                return;\n            }\n            if (game.status !== \"waiting\") {\n                socket.emit(\"error\", {\n                    message: \"Game has already started\"\n                });\n                return;\n            }\n            // Initialize the game\n            const deck = (0,_utils_game__WEBPACK_IMPORTED_MODULE_2__.createDeck)();\n            const shuffledDeck = (0,_utils_game__WEBPACK_IMPORTED_MODULE_2__.shuffleDeck)(deck);\n            const { hands, remainingDeck } = (0,_utils_game__WEBPACK_IMPORTED_MODULE_2__.dealCards)(shuffledDeck, 2);\n            const board = (0,_utils_game__WEBPACK_IMPORTED_MODULE_2__.createGameBoard)();\n            // Create game state\n            const gameState = {\n                status: \"playing\",\n                board,\n                currentTurn: game.playerToGame[0].playerId,\n                player1: {\n                    id: game.playerToGame[0].playerId,\n                    sequences: []\n                },\n                player2: {\n                    id: game.playerToGame[1].playerId,\n                    sequences: []\n                }\n            };\n            // Save game state to database\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].gameState.create({\n                data: {\n                    gameId: game.id,\n                    currentTurn: gameState.currentTurn,\n                    board: gameState.board,\n                    deck: remainingDeck,\n                    player1Hand: hands[0],\n                    player2Hand: hands[1],\n                    sequences: []\n                }\n            });\n            // Update game status\n            await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].game.update({\n                where: {\n                    id: game.id\n                },\n                data: {\n                    status: \"playing\"\n                }\n            });\n            // Store game state in memory\n            activeGames.set(roomCode, {\n                gameState,\n                deck: remainingDeck,\n                hands\n            });\n            // Send game state to all clients in the room\n            io.to(roomCode).emit(\"gameStarted\", {\n                gameState,\n                players: game.playerToGame.map((ptg, index)=>({\n                        id: ptg.player.id,\n                        name: ptg.player.name,\n                        isHost: ptg.player.id === game.hostId,\n                        hand: hands[index]\n                    }))\n            });\n        } catch (error) {\n            console.error(\"Error starting game:\", error);\n            socket.emit(\"error\", {\n                message: \"Failed to start game\"\n            });\n        }\n    });\n    // Play a card\n    socket.on(\"playCard\", async ({ roomCode, card, position })=>{\n        try {\n            // Get active game from memory\n            const activeGame = activeGames.get(roomCode);\n            if (!activeGame) {\n                socket.emit(\"error\", {\n                    message: \"Game not found\"\n                });\n                return;\n            }\n            const { gameState, deck, hands } = activeGame;\n            if (gameState.status !== \"playing\") {\n                socket.emit(\"error\", {\n                    message: \"Game is not in progress\"\n                });\n                return;\n            }\n            if (gameState.currentTurn !== socket.id) {\n                socket.emit(\"error\", {\n                    message: \"Not your turn\"\n                });\n                return;\n            }\n            // Determine player index (0 or 1)\n            const playerIndex = gameState.player1.id === socket.id ? 0 : 1;\n            const playerKey = playerIndex === 0 ? \"player1\" : \"player2\";\n            const opponentKey = playerIndex === 0 ? \"player2\" : \"player1\";\n            // Check if player has the card\n            const handIndex = hands[playerIndex].findIndex((c)=>c.id === card.id);\n            if (handIndex === -1) {\n                socket.emit(\"error\", {\n                    message: \"Card not in hand\"\n                });\n                return;\n            }\n            // Handle card play based on type\n            if (card.isJack) {\n                if (card.jackType === \"one-eyed\") {\n                    // One-eyed Jack: Remove opponent's chip\n                    if (!position) {\n                        socket.emit(\"error\", {\n                            message: \"Position required for one-eyed Jack\"\n                        });\n                        return;\n                    }\n                    const { row, col } = position;\n                    const cell = gameState.board[row][col];\n                    if (!cell.chip || cell.chip === playerKey) {\n                        socket.emit(\"error\", {\n                            message: \"Can only remove opponent's chips\"\n                        });\n                        return;\n                    }\n                    // Remove the chip\n                    gameState.board[row][col].chip = undefined;\n                } else {\n                    // Two-eyed Jack: Place chip anywhere\n                    if (!position) {\n                        socket.emit(\"error\", {\n                            message: \"Position required for two-eyed Jack\"\n                        });\n                        return;\n                    }\n                    const { row, col } = position;\n                    const cell = gameState.board[row][col];\n                    if (cell.chip) {\n                        socket.emit(\"error\", {\n                            message: \"Space already occupied\"\n                        });\n                        return;\n                    }\n                    // Place the chip\n                    gameState.board[row][col].chip = playerKey;\n                    // Check for sequence\n                    const sequenceResult = (0,_utils_game__WEBPACK_IMPORTED_MODULE_2__.checkForSequence)(gameState.board, row, col, playerKey);\n                    if (sequenceResult.hasSequence && sequenceResult.sequence) {\n                        gameState[playerKey].sequences.push({\n                            ...sequenceResult.sequence,\n                            player: playerKey\n                        });\n                        // Check for win (2 sequences)\n                        if (gameState[playerKey].sequences.length >= 2) {\n                            gameState.status = \"completed\";\n                            gameState.winner = socket.id;\n                        }\n                    }\n                }\n            } else {\n                // Regular card: Place chip on matching card\n                if (!position) {\n                    socket.emit(\"error\", {\n                        message: \"Position required\"\n                    });\n                    return;\n                }\n                const { row, col } = position;\n                const cell = gameState.board[row][col];\n                if (cell.chip) {\n                    socket.emit(\"error\", {\n                        message: \"Space already occupied\"\n                    });\n                    return;\n                }\n                if (!cell.card || cell.card.rank !== card.rank || cell.card.suit !== card.suit) {\n                    socket.emit(\"error\", {\n                        message: \"Card does not match board position\"\n                    });\n                    return;\n                }\n                // Place the chip\n                gameState.board[row][col].chip = playerKey;\n                // Check for sequence\n                const sequenceResult = (0,_utils_game__WEBPACK_IMPORTED_MODULE_2__.checkForSequence)(gameState.board, row, col, playerKey);\n                if (sequenceResult.hasSequence && sequenceResult.sequence) {\n                    gameState[playerKey].sequences.push({\n                        ...sequenceResult.sequence,\n                        player: playerKey\n                    });\n                    // Check for win (2 sequences)\n                    if (gameState[playerKey].sequences.length >= 2) {\n                        gameState.status = \"completed\";\n                        gameState.winner = socket.id;\n                    }\n                }\n            }\n            // Remove card from hand and draw a new one\n            hands[playerIndex].splice(handIndex, 1);\n            if (deck.length > 0) {\n                const newCard = deck.pop();\n                hands[playerIndex].push(newCard);\n            }\n            // Switch turns\n            gameState.currentTurn = gameState[opponentKey].id;\n            // Update game state in memory\n            activeGames.set(roomCode, {\n                gameState,\n                deck,\n                hands\n            });\n            // Send updated game state to all clients in the room\n            io.to(roomCode).emit(\"gameStateUpdate\", {\n                gameState,\n                players: [\n                    {\n                        id: gameState.player1.id,\n                        hand: hands[0]\n                    },\n                    {\n                        id: gameState.player2.id,\n                        hand: hands[1]\n                    }\n                ]\n            });\n            // If game is completed, update database\n            if (gameState.status === \"completed\") {\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].game.update({\n                    where: {\n                        roomCode\n                    },\n                    data: {\n                        status: \"completed\"\n                    }\n                });\n                await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].gameState.update({\n                    where: {\n                        gameId: (await _lib_prisma__WEBPACK_IMPORTED_MODULE_1__[\"default\"].game.findUnique({\n                            where: {\n                                roomCode\n                            }\n                        })).id\n                    },\n                    data: {\n                        winner: gameState.winner,\n                        sequences: gameState.player1.sequences.concat(gameState.player2.sequences)\n                    }\n                });\n            }\n        } catch (error) {\n            console.error(\"Error playing card:\", error);\n            socket.emit(\"error\", {\n                message: \"Failed to play card\"\n            });\n        }\n    });\n    // Disconnect\n    socket.on(\"disconnect\", ()=>{\n        console.log(\"Client disconnected:\", socket.id);\n    });\n});\nasync function GET(req) {\n    return new Response(\"Socket.io server\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLFNBQVM7Z0JBQUVDLFNBQVM7WUFBc0I7UUFDeEQ7SUFDRjtJQUVBLGFBQWE7SUFDYmYsT0FBT0QsRUFBRSxDQUFDLGNBQWM7UUFDdEJFLFFBQVFDLEdBQUcsQ0FBQyx3QkFBd0JGLE9BQU9HLEVBQUU7SUFDL0M7QUFDRjtBQUVPLGVBQWU0RSxJQUFJQyxHQUFnQjtJQUN4QyxPQUFPLElBQUlDLFNBQVM7QUFDdEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZXF1ZW5jZS1nYW1lLy4vc3JjL2FwcC9hcGkvc29ja2V0L3JvdXRlLnRzP2JkOTciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBTZXJ2ZXIgfSBmcm9tICdzb2NrZXQuaW8nO1xuaW1wb3J0IHByaXNtYSBmcm9tICdAL2xpYi9wcmlzbWEnO1xuaW1wb3J0IHsgY3JlYXRlRGVjaywgc2h1ZmZsZURlY2ssIGRlYWxDYXJkcywgY3JlYXRlR2FtZUJvYXJkLCBjaGVja0ZvclNlcXVlbmNlIH0gZnJvbSAnQC91dGlscy9nYW1lJztcbmltcG9ydCB7IENhcmQsIEdhbWVTdGF0ZSB9IGZyb20gJ0AvdHlwZXMvZ2FtZSc7XG5cbi8vIFN0b3JlIGFjdGl2ZSBnYW1lcyBpbiBtZW1vcnlcbmNvbnN0IGFjdGl2ZUdhbWVzID0gbmV3IE1hcCgpO1xuXG4vLyBTb2NrZXQuaW8gc2VydmVyXG5jb25zdCBpbyA9IG5ldyBTZXJ2ZXIoe1xuICBwYXRoOiAnL2FwaS9zb2NrZXQnLFxufSk7XG5cbmlvLm9uKCdjb25uZWN0aW9uJywgKHNvY2tldCkgPT4ge1xuICBjb25zb2xlLmxvZygnQ2xpZW50IGNvbm5lY3RlZDonLCBzb2NrZXQuaWQpO1xuICBcbiAgLy8gSm9pbiBhIHJvb21cbiAgc29ja2V0Lm9uKCdqb2luUm9vbScsIGFzeW5jICh7IHJvb21Db2RlIH0pID0+IHtcbiAgICB0cnkge1xuICAgICAgc29ja2V0LmpvaW4ocm9vbUNvZGUpO1xuICAgICAgXG4gICAgICAvLyBHZXQgZ2FtZSBkYXRhIGZyb20gZGF0YWJhc2VcbiAgICAgIGNvbnN0IGdhbWUgPSBhd2FpdCBwcmlzbWEuZ2FtZS5maW5kVW5pcXVlKHtcbiAgICAgICAgd2hlcmU6IHsgcm9vbUNvZGUgfSxcbiAgICAgICAgaW5jbHVkZToge1xuICAgICAgICAgIGhvc3Q6IHRydWUsXG4gICAgICAgICAgcGxheWVyVG9HYW1lOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHBsYXllcjogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICBnYW1lU3RhdGU6IHRydWUsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgaWYgKCFnYW1lKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ1Jvb20gbm90IGZvdW5kJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGb3JtYXQgcGxheWVycyBkYXRhXG4gICAgICBjb25zdCBwbGF5ZXJzID0gZ2FtZS5wbGF5ZXJUb0dhbWUubWFwKChwdGcpID0+ICh7XG4gICAgICAgIGlkOiBwdGcucGxheWVyLmlkLFxuICAgICAgICBuYW1lOiBwdGcucGxheWVyLm5hbWUsXG4gICAgICAgIGlzSG9zdDogcHRnLnBsYXllci5pZCA9PT0gZ2FtZS5ob3N0SWQsXG4gICAgICAgIGhhbmQ6IFtdLCAvLyBXaWxsIGJlIHBvcHVsYXRlZCBpZiBnYW1lIGlzIGluIHByb2dyZXNzXG4gICAgICB9KSk7XG4gICAgICBcbiAgICAgIC8vIEdldCBvciBpbml0aWFsaXplIGdhbWUgc3RhdGVcbiAgICAgIGxldCBnYW1lU3RhdGUgPSBudWxsO1xuICAgICAgXG4gICAgICBpZiAoZ2FtZS5nYW1lU3RhdGUpIHtcbiAgICAgICAgZ2FtZVN0YXRlID0ge1xuICAgICAgICAgIHN0YXR1czogZ2FtZS5zdGF0dXMgYXMgJ3dhaXRpbmcnIHwgJ3BsYXlpbmcnIHwgJ2NvbXBsZXRlZCcsXG4gICAgICAgICAgYm9hcmQ6IGdhbWUuZ2FtZVN0YXRlLmJvYXJkIGFzIGFueSxcbiAgICAgICAgICBjdXJyZW50VHVybjogZ2FtZS5nYW1lU3RhdGUuY3VycmVudFR1cm4sXG4gICAgICAgICAgcGxheWVyMToge1xuICAgICAgICAgICAgaWQ6IHBsYXllcnNbMF0/LmlkLFxuICAgICAgICAgICAgc2VxdWVuY2VzOiAoZ2FtZS5nYW1lU3RhdGUuc2VxdWVuY2VzIGFzIGFueSkuZmlsdGVyKChzOiBhbnkpID0+IHMucGxheWVyID09PSAncGxheWVyMScpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgcGxheWVyMjoge1xuICAgICAgICAgICAgaWQ6IHBsYXllcnNbMV0/LmlkLFxuICAgICAgICAgICAgc2VxdWVuY2VzOiAoZ2FtZS5nYW1lU3RhdGUuc2VxdWVuY2VzIGFzIGFueSkuZmlsdGVyKChzOiBhbnkpID0+IHMucGxheWVyID09PSAncGxheWVyMicpLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgd2lubmVyOiBnYW1lLmdhbWVTdGF0ZS53aW5uZXIsXG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICAvLyBJZiBnYW1lIGlzIGluIHByb2dyZXNzLCBnZXQgcGxheWVyIGhhbmRzXG4gICAgICAgIGlmIChnYW1lLnN0YXR1cyA9PT0gJ3BsYXlpbmcnKSB7XG4gICAgICAgICAgY29uc3QgcGxheWVyMUhhbmQgPSBnYW1lLmdhbWVTdGF0ZS5wbGF5ZXIxSGFuZCBhcyBhbnk7XG4gICAgICAgICAgY29uc3QgcGxheWVyMkhhbmQgPSBnYW1lLmdhbWVTdGF0ZS5wbGF5ZXIySGFuZCBhcyBhbnk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gRmluZCB0aGUgY3VycmVudCBwbGF5ZXJcbiAgICAgICAgICBjb25zdCBjdXJyZW50UGxheWVySW5kZXggPSBwbGF5ZXJzLmZpbmRJbmRleCgocCkgPT4gcC5pZCA9PT0gc29ja2V0LmlkKTtcbiAgICAgICAgICBcbiAgICAgICAgICBpZiAoY3VycmVudFBsYXllckluZGV4ID09PSAwKSB7XG4gICAgICAgICAgICBwbGF5ZXJzWzBdLmhhbmQgPSBwbGF5ZXIxSGFuZDtcbiAgICAgICAgICB9IGVsc2UgaWYgKGN1cnJlbnRQbGF5ZXJJbmRleCA9PT0gMSkge1xuICAgICAgICAgICAgcGxheWVyc1sxXS5oYW5kID0gcGxheWVyMkhhbmQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFNlbmQgcm9vbSBkYXRhIHRvIHRoZSBjbGllbnRcbiAgICAgIHNvY2tldC5lbWl0KCdyb29tRGF0YScsIHtcbiAgICAgICAgcGxheWVycyxcbiAgICAgICAgZ2FtZVN0YXRlLFxuICAgICAgICBjdXJyZW50UGxheWVyOiBwbGF5ZXJzLmZpbmQoKHApID0+IHAuaWQgPT09IHNvY2tldC5pZCksXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gTm90aWZ5IG90aGVyIGNsaWVudHMgaW4gdGhlIHJvb21cbiAgICAgIHNvY2tldC50byhyb29tQ29kZSkuZW1pdCgncGxheWVySm9pbmVkJywge1xuICAgICAgICBwbGF5ZXJzLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGpvaW5pbmcgcm9vbTonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gam9pbiByb29tJyB9KTtcbiAgICB9XG4gIH0pO1xuICBcbiAgLy8gU3RhcnQgdGhlIGdhbWVcbiAgc29ja2V0Lm9uKCdzdGFydEdhbWUnLCBhc3luYyAoeyByb29tQ29kZSB9KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIC8vIEdldCBnYW1lIGRhdGEgZnJvbSBkYXRhYmFzZVxuICAgICAgY29uc3QgZ2FtZSA9IGF3YWl0IHByaXNtYS5nYW1lLmZpbmRVbmlxdWUoe1xuICAgICAgICB3aGVyZTogeyByb29tQ29kZSB9LFxuICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgcGxheWVyVG9HYW1lOiB7XG4gICAgICAgICAgICBpbmNsdWRlOiB7XG4gICAgICAgICAgICAgIHBsYXllcjogdHJ1ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICBpZiAoIWdhbWUpIHtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnUm9vbSBub3QgZm91bmQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChnYW1lLmhvc3RJZCAhPT0gc29ja2V0LmlkKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ09ubHkgdGhlIGhvc3QgY2FuIHN0YXJ0IHRoZSBnYW1lJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAoZ2FtZS5wbGF5ZXJUb0dhbWUubGVuZ3RoIDwgMikge1xuICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdOZWVkIGF0IGxlYXN0IDIgcGxheWVycyB0byBzdGFydCcgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgaWYgKGdhbWUuc3RhdHVzICE9PSAnd2FpdGluZycpIHtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnR2FtZSBoYXMgYWxyZWFkeSBzdGFydGVkJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJbml0aWFsaXplIHRoZSBnYW1lXG4gICAgICBjb25zdCBkZWNrID0gY3JlYXRlRGVjaygpO1xuICAgICAgY29uc3Qgc2h1ZmZsZWREZWNrID0gc2h1ZmZsZURlY2soZGVjayk7XG4gICAgICBjb25zdCB7IGhhbmRzLCByZW1haW5pbmdEZWNrIH0gPSBkZWFsQ2FyZHMoc2h1ZmZsZWREZWNrLCAyKTtcbiAgICAgIGNvbnN0IGJvYXJkID0gY3JlYXRlR2FtZUJvYXJkKCk7XG4gICAgICBcbiAgICAgIC8vIENyZWF0ZSBnYW1lIHN0YXRlXG4gICAgICBjb25zdCBnYW1lU3RhdGU6IEdhbWVTdGF0ZSA9IHtcbiAgICAgICAgc3RhdHVzOiAncGxheWluZycsXG4gICAgICAgIGJvYXJkLFxuICAgICAgICBjdXJyZW50VHVybjogZ2FtZS5wbGF5ZXJUb0dhbWVbMF0ucGxheWVySWQsIC8vIEZpcnN0IHBsYXllciBzdGFydHNcbiAgICAgICAgcGxheWVyMToge1xuICAgICAgICAgIGlkOiBnYW1lLnBsYXllclRvR2FtZVswXS5wbGF5ZXJJZCxcbiAgICAgICAgICBzZXF1ZW5jZXM6IFtdLFxuICAgICAgICB9LFxuICAgICAgICBwbGF5ZXIyOiB7XG4gICAgICAgICAgaWQ6IGdhbWUucGxheWVyVG9HYW1lWzFdLnBsYXllcklkLFxuICAgICAgICAgIHNlcXVlbmNlczogW10sXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgICAgXG4gICAgICAvLyBTYXZlIGdhbWUgc3RhdGUgdG8gZGF0YWJhc2VcbiAgICAgIGF3YWl0IHByaXNtYS5nYW1lU3RhdGUuY3JlYXRlKHtcbiAgICAgICAgZGF0YToge1xuICAgICAgICAgIGdhbWVJZDogZ2FtZS5pZCxcbiAgICAgICAgICBjdXJyZW50VHVybjogZ2FtZVN0YXRlLmN1cnJlbnRUdXJuLFxuICAgICAgICAgIGJvYXJkOiBnYW1lU3RhdGUuYm9hcmQgYXMgYW55LFxuICAgICAgICAgIGRlY2s6IHJlbWFpbmluZ0RlY2sgYXMgYW55LFxuICAgICAgICAgIHBsYXllcjFIYW5kOiBoYW5kc1swXSBhcyBhbnksXG4gICAgICAgICAgcGxheWVyMkhhbmQ6IGhhbmRzWzFdIGFzIGFueSxcbiAgICAgICAgICBzZXF1ZW5jZXM6IFtdIGFzIGFueSxcbiAgICAgICAgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBVcGRhdGUgZ2FtZSBzdGF0dXNcbiAgICAgIGF3YWl0IHByaXNtYS5nYW1lLnVwZGF0ZSh7XG4gICAgICAgIHdoZXJlOiB7IGlkOiBnYW1lLmlkIH0sXG4gICAgICAgIGRhdGE6IHsgc3RhdHVzOiAncGxheWluZycgfSxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTdG9yZSBnYW1lIHN0YXRlIGluIG1lbW9yeVxuICAgICAgYWN0aXZlR2FtZXMuc2V0KHJvb21Db2RlLCB7XG4gICAgICAgIGdhbWVTdGF0ZSxcbiAgICAgICAgZGVjazogcmVtYWluaW5nRGVjayxcbiAgICAgICAgaGFuZHMsXG4gICAgICB9KTtcbiAgICAgIFxuICAgICAgLy8gU2VuZCBnYW1lIHN0YXRlIHRvIGFsbCBjbGllbnRzIGluIHRoZSByb29tXG4gICAgICBpby50byhyb29tQ29kZSkuZW1pdCgnZ2FtZVN0YXJ0ZWQnLCB7XG4gICAgICAgIGdhbWVTdGF0ZSxcbiAgICAgICAgcGxheWVyczogZ2FtZS5wbGF5ZXJUb0dhbWUubWFwKChwdGcsIGluZGV4KSA9PiAoe1xuICAgICAgICAgIGlkOiBwdGcucGxheWVyLmlkLFxuICAgICAgICAgIG5hbWU6IHB0Zy5wbGF5ZXIubmFtZSxcbiAgICAgICAgICBpc0hvc3Q6IHB0Zy5wbGF5ZXIuaWQgPT09IGdhbWUuaG9zdElkLFxuICAgICAgICAgIGhhbmQ6IGhhbmRzW2luZGV4XSxcbiAgICAgICAgfSkpLFxuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHN0YXJ0aW5nIGdhbWU6JywgZXJyb3IpO1xuICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnRmFpbGVkIHRvIHN0YXJ0IGdhbWUnIH0pO1xuICAgIH1cbiAgfSk7XG4gIFxuICAvLyBQbGF5IGEgY2FyZFxuICBzb2NrZXQub24oJ3BsYXlDYXJkJywgYXN5bmMgKHsgcm9vbUNvZGUsIGNhcmQsIHBvc2l0aW9uIH0pID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IGFjdGl2ZSBnYW1lIGZyb20gbWVtb3J5XG4gICAgICBjb25zdCBhY3RpdmVHYW1lID0gYWN0aXZlR2FtZXMuZ2V0KHJvb21Db2RlKTtcbiAgICAgIFxuICAgICAgaWYgKCFhY3RpdmVHYW1lKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0dhbWUgbm90IGZvdW5kJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCB7IGdhbWVTdGF0ZSwgZGVjaywgaGFuZHMgfSA9IGFjdGl2ZUdhbWU7XG4gICAgICBcbiAgICAgIGlmIChnYW1lU3RhdGUuc3RhdHVzICE9PSAncGxheWluZycpIHtcbiAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnR2FtZSBpcyBub3QgaW4gcHJvZ3Jlc3MnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChnYW1lU3RhdGUuY3VycmVudFR1cm4gIT09IHNvY2tldC5pZCkge1xuICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdOb3QgeW91ciB0dXJuJyB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBEZXRlcm1pbmUgcGxheWVyIGluZGV4ICgwIG9yIDEpXG4gICAgICBjb25zdCBwbGF5ZXJJbmRleCA9IGdhbWVTdGF0ZS5wbGF5ZXIxLmlkID09PSBzb2NrZXQuaWQgPyAwIDogMTtcbiAgICAgIGNvbnN0IHBsYXllcktleSA9IHBsYXllckluZGV4ID09PSAwID8gJ3BsYXllcjEnIDogJ3BsYXllcjInO1xuICAgICAgY29uc3Qgb3Bwb25lbnRLZXkgPSBwbGF5ZXJJbmRleCA9PT0gMCA/ICdwbGF5ZXIyJyA6ICdwbGF5ZXIxJztcbiAgICAgIFxuICAgICAgLy8gQ2hlY2sgaWYgcGxheWVyIGhhcyB0aGUgY2FyZFxuICAgICAgY29uc3QgaGFuZEluZGV4ID0gaGFuZHNbcGxheWVySW5kZXhdLmZpbmRJbmRleCgoYykgPT4gYy5pZCA9PT0gY2FyZC5pZCk7XG4gICAgICBcbiAgICAgIGlmIChoYW5kSW5kZXggPT09IC0xKSB7XG4gICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0NhcmQgbm90IGluIGhhbmQnIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIEhhbmRsZSBjYXJkIHBsYXkgYmFzZWQgb24gdHlwZVxuICAgICAgaWYgKGNhcmQuaXNKYWNrKSB7XG4gICAgICAgIGlmIChjYXJkLmphY2tUeXBlID09PSAnb25lLWV5ZWQnKSB7XG4gICAgICAgICAgLy8gT25lLWV5ZWQgSmFjazogUmVtb3ZlIG9wcG9uZW50J3MgY2hpcFxuICAgICAgICAgIGlmICghcG9zaXRpb24pIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ1Bvc2l0aW9uIHJlcXVpcmVkIGZvciBvbmUtZXllZCBKYWNrJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgeyByb3csIGNvbCB9ID0gcG9zaXRpb247XG4gICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVTdGF0ZS5ib2FyZFtyb3ddW2NvbF07XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFjZWxsLmNoaXAgfHwgY2VsbC5jaGlwID09PSBwbGF5ZXJLZXkpIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ0NhbiBvbmx5IHJlbW92ZSBvcHBvbmVudFxcJ3MgY2hpcHMnIH0pO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICAvLyBSZW1vdmUgdGhlIGNoaXBcbiAgICAgICAgICBnYW1lU3RhdGUuYm9hcmRbcm93XVtjb2xdLmNoaXAgPSB1bmRlZmluZWQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gVHdvLWV5ZWQgSmFjazogUGxhY2UgY2hpcCBhbnl3aGVyZVxuICAgICAgICAgIGlmICghcG9zaXRpb24pIHtcbiAgICAgICAgICAgIHNvY2tldC5lbWl0KCdlcnJvcicsIHsgbWVzc2FnZTogJ1Bvc2l0aW9uIHJlcXVpcmVkIGZvciB0d28tZXllZCBKYWNrJyB9KTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc3QgeyByb3csIGNvbCB9ID0gcG9zaXRpb247XG4gICAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVTdGF0ZS5ib2FyZFtyb3ddW2NvbF07XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKGNlbGwuY2hpcCkge1xuICAgICAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnU3BhY2UgYWxyZWFkeSBvY2N1cGllZCcgfSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFBsYWNlIHRoZSBjaGlwXG4gICAgICAgICAgZ2FtZVN0YXRlLmJvYXJkW3Jvd11bY29sXS5jaGlwID0gcGxheWVyS2V5O1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENoZWNrIGZvciBzZXF1ZW5jZVxuICAgICAgICAgIGNvbnN0IHNlcXVlbmNlUmVzdWx0ID0gY2hlY2tGb3JTZXF1ZW5jZShnYW1lU3RhdGUuYm9hcmQsIHJvdywgY29sLCBwbGF5ZXJLZXkpO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmIChzZXF1ZW5jZVJlc3VsdC5oYXNTZXF1ZW5jZSAmJiBzZXF1ZW5jZVJlc3VsdC5zZXF1ZW5jZSkge1xuICAgICAgICAgICAgZ2FtZVN0YXRlW3BsYXllcktleV0uc2VxdWVuY2VzLnB1c2goe1xuICAgICAgICAgICAgICAuLi5zZXF1ZW5jZVJlc3VsdC5zZXF1ZW5jZSxcbiAgICAgICAgICAgICAgcGxheWVyOiBwbGF5ZXJLZXksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gQ2hlY2sgZm9yIHdpbiAoMiBzZXF1ZW5jZXMpXG4gICAgICAgICAgICBpZiAoZ2FtZVN0YXRlW3BsYXllcktleV0uc2VxdWVuY2VzLmxlbmd0aCA+PSAyKSB7XG4gICAgICAgICAgICAgIGdhbWVTdGF0ZS5zdGF0dXMgPSAnY29tcGxldGVkJztcbiAgICAgICAgICAgICAgZ2FtZVN0YXRlLndpbm5lciA9IHNvY2tldC5pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIFJlZ3VsYXIgY2FyZDogUGxhY2UgY2hpcCBvbiBtYXRjaGluZyBjYXJkXG4gICAgICAgIGlmICghcG9zaXRpb24pIHtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdQb3NpdGlvbiByZXF1aXJlZCcgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBjb25zdCB7IHJvdywgY29sIH0gPSBwb3NpdGlvbjtcbiAgICAgICAgY29uc3QgY2VsbCA9IGdhbWVTdGF0ZS5ib2FyZFtyb3ddW2NvbF07XG4gICAgICAgIFxuICAgICAgICBpZiAoY2VsbC5jaGlwKSB7XG4gICAgICAgICAgc29ja2V0LmVtaXQoJ2Vycm9yJywgeyBtZXNzYWdlOiAnU3BhY2UgYWxyZWFkeSBvY2N1cGllZCcgfSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIFxuICAgICAgICBpZiAoIWNlbGwuY2FyZCB8fCBjZWxsLmNhcmQucmFuayAhPT0gY2FyZC5yYW5rIHx8IGNlbGwuY2FyZC5zdWl0ICE9PSBjYXJkLnN1aXQpIHtcbiAgICAgICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdDYXJkIGRvZXMgbm90IG1hdGNoIGJvYXJkIHBvc2l0aW9uJyB9KTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIC8vIFBsYWNlIHRoZSBjaGlwXG4gICAgICAgIGdhbWVTdGF0ZS5ib2FyZFtyb3ddW2NvbF0uY2hpcCA9IHBsYXllcktleTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGZvciBzZXF1ZW5jZVxuICAgICAgICBjb25zdCBzZXF1ZW5jZVJlc3VsdCA9IGNoZWNrRm9yU2VxdWVuY2UoZ2FtZVN0YXRlLmJvYXJkLCByb3csIGNvbCwgcGxheWVyS2V5KTtcbiAgICAgICAgXG4gICAgICAgIGlmIChzZXF1ZW5jZVJlc3VsdC5oYXNTZXF1ZW5jZSAmJiBzZXF1ZW5jZVJlc3VsdC5zZXF1ZW5jZSkge1xuICAgICAgICAgIGdhbWVTdGF0ZVtwbGF5ZXJLZXldLnNlcXVlbmNlcy5wdXNoKHtcbiAgICAgICAgICAgIC4uLnNlcXVlbmNlUmVzdWx0LnNlcXVlbmNlLFxuICAgICAgICAgICAgcGxheWVyOiBwbGF5ZXJLZXksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2hlY2sgZm9yIHdpbiAoMiBzZXF1ZW5jZXMpXG4gICAgICAgICAgaWYgKGdhbWVTdGF0ZVtwbGF5ZXJLZXldLnNlcXVlbmNlcy5sZW5ndGggPj0gMikge1xuICAgICAgICAgICAgZ2FtZVN0YXRlLnN0YXR1cyA9ICdjb21wbGV0ZWQnO1xuICAgICAgICAgICAgZ2FtZVN0YXRlLndpbm5lciA9IHNvY2tldC5pZDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIFxuICAgICAgLy8gUmVtb3ZlIGNhcmQgZnJvbSBoYW5kIGFuZCBkcmF3IGEgbmV3IG9uZVxuICAgICAgaGFuZHNbcGxheWVySW5kZXhdLnNwbGljZShoYW5kSW5kZXgsIDEpO1xuICAgICAgXG4gICAgICBpZiAoZGVjay5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IG5ld0NhcmQgPSBkZWNrLnBvcCgpITtcbiAgICAgICAgaGFuZHNbcGxheWVySW5kZXhdLnB1c2gobmV3Q2FyZCk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIFN3aXRjaCB0dXJuc1xuICAgICAgZ2FtZVN0YXRlLmN1cnJlbnRUdXJuID0gZ2FtZVN0YXRlW29wcG9uZW50S2V5XS5pZDtcbiAgICAgIFxuICAgICAgLy8gVXBkYXRlIGdhbWUgc3RhdGUgaW4gbWVtb3J5XG4gICAgICBhY3RpdmVHYW1lcy5zZXQocm9vbUNvZGUsIHtcbiAgICAgICAgZ2FtZVN0YXRlLFxuICAgICAgICBkZWNrLFxuICAgICAgICBoYW5kcyxcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyBTZW5kIHVwZGF0ZWQgZ2FtZSBzdGF0ZSB0byBhbGwgY2xpZW50cyBpbiB0aGUgcm9vbVxuICAgICAgaW8udG8ocm9vbUNvZGUpLmVtaXQoJ2dhbWVTdGF0ZVVwZGF0ZScsIHtcbiAgICAgICAgZ2FtZVN0YXRlLFxuICAgICAgICBwbGF5ZXJzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6IGdhbWVTdGF0ZS5wbGF5ZXIxLmlkLFxuICAgICAgICAgICAgaGFuZDogaGFuZHNbMF0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogZ2FtZVN0YXRlLnBsYXllcjIuaWQsXG4gICAgICAgICAgICBoYW5kOiBoYW5kc1sxXSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSk7XG4gICAgICBcbiAgICAgIC8vIElmIGdhbWUgaXMgY29tcGxldGVkLCB1cGRhdGUgZGF0YWJhc2VcbiAgICAgIGlmIChnYW1lU3RhdGUuc3RhdHVzID09PSAnY29tcGxldGVkJykge1xuICAgICAgICBhd2FpdCBwcmlzbWEuZ2FtZS51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IHJvb21Db2RlIH0sXG4gICAgICAgICAgZGF0YTogeyBzdGF0dXM6ICdjb21wbGV0ZWQnIH0sXG4gICAgICAgIH0pO1xuICAgICAgICBcbiAgICAgICAgYXdhaXQgcHJpc21hLmdhbWVTdGF0ZS51cGRhdGUoe1xuICAgICAgICAgIHdoZXJlOiB7IGdhbWVJZDogKGF3YWl0IHByaXNtYS5nYW1lLmZpbmRVbmlxdWUoeyB3aGVyZTogeyByb29tQ29kZSB9IH0pKSEuaWQgfSxcbiAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICB3aW5uZXI6IGdhbWVTdGF0ZS53aW5uZXIsXG4gICAgICAgICAgICBzZXF1ZW5jZXM6IGdhbWVTdGF0ZS5wbGF5ZXIxLnNlcXVlbmNlcy5jb25jYXQoZ2FtZVN0YXRlLnBsYXllcjIuc2VxdWVuY2VzKSBhcyBhbnksXG4gICAgICAgICAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBsYXlpbmcgY2FyZDonLCBlcnJvcik7XG4gICAgICBzb2NrZXQuZW1pdCgnZXJyb3InLCB7IG1lc3NhZ2U6ICdGYWlsZWQgdG8gcGxheSBjYXJkJyB9KTtcbiAgICB9XG4gIH0pO1xuICBcbiAgLy8gRGlzY29ubmVjdFxuICBzb2NrZXQub24oJ2Rpc2Nvbm5lY3QnLCAoKSA9PiB7XG4gICAgY29uc29sZS5sb2coJ0NsaWVudCBkaXNjb25uZWN0ZWQ6Jywgc29ja2V0LmlkKTtcbiAgfSk7XG59KTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHJldHVybiBuZXcgUmVzcG9uc2UoJ1NvY2tldC5pbyBzZXJ2ZXInKTtcbn1cbiJdLCJuYW1lcyI6WyJTZXJ2ZXIiLCJwcmlzbWEiLCJjcmVhdGVEZWNrIiwic2h1ZmZsZURlY2siLCJkZWFsQ2FyZHMiLCJjcmVhdGVHYW1lQm9hcmQiLCJjaGVja0ZvclNlcXVlbmNlIiwiYWN0aXZlR2FtZXMiLCJNYXAiLCJpbyIsInBhdGgiLCJvbiIsInNvY2tldCIsImNvbnNvbGUiLCJsb2ciLCJpZCIsInJvb21Db2RlIiwiam9pbiIsImdhbWUiLCJmaW5kVW5pcXVlIiwid2hlcmUiLCJpbmNsdWRlIiwiaG9zdCIsInBsYXllclRvR2FtZSIsInBsYXllciIsImdhbWVTdGF0ZSIsImVtaXQiLCJtZXNzYWdlIiwicGxheWVycyIsIm1hcCIsInB0ZyIsIm5hbWUiLCJpc0hvc3QiLCJob3N0SWQiLCJoYW5kIiwic3RhdHVzIiwiYm9hcmQiLCJjdXJyZW50VHVybiIsInBsYXllcjEiLCJzZXF1ZW5jZXMiLCJmaWx0ZXIiLCJzIiwicGxheWVyMiIsIndpbm5lciIsInBsYXllcjFIYW5kIiwicGxheWVyMkhhbmQiLCJjdXJyZW50UGxheWVySW5kZXgiLCJmaW5kSW5kZXgiLCJwIiwiY3VycmVudFBsYXllciIsImZpbmQiLCJ0byIsImVycm9yIiwibGVuZ3RoIiwiZGVjayIsInNodWZmbGVkRGVjayIsImhhbmRzIiwicmVtYWluaW5nRGVjayIsInBsYXllcklkIiwiY3JlYXRlIiwiZGF0YSIsImdhbWVJZCIsInVwZGF0ZSIsInNldCIsImluZGV4IiwiY2FyZCIsInBvc2l0aW9uIiwiYWN0aXZlR2FtZSIsImdldCIsInBsYXllckluZGV4IiwicGxheWVyS2V5Iiwib3Bwb25lbnRLZXkiLCJoYW5kSW5kZXgiLCJjIiwiaXNKYWNrIiwiamFja1R5cGUiLCJyb3ciLCJjb2wiLCJjZWxsIiwiY2hpcCIsInVuZGVmaW5lZCIsInNlcXVlbmNlUmVzdWx0IiwiaGFzU2VxdWVuY2UiLCJzZXF1ZW5jZSIsInB1c2giLCJyYW5rIiwic3VpdCIsInNwbGljZSIsIm5ld0NhcmQiLCJwb3AiLCJjb25jYXQiLCJHRVQiLCJyZXEiLCJSZXNwb25zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/socket/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/prisma.ts":
/*!***************************!*\
  !*** ./src/lib/prisma.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   prisma: () => (/* binding */ prisma)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n\n// PrismaClient is attached to the `global` object in development to prevent\n// exhausting your database connection limit.\nconst globalForPrisma = global;\nconst prisma = globalForPrisma.prisma || new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nif (true) globalForPrisma.prisma = prisma;\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (prisma);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL3ByaXNtYS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQThDO0FBRTlDLDRFQUE0RTtBQUM1RSw2Q0FBNkM7QUFDN0MsTUFBTUMsa0JBQWtCQztBQUVqQixNQUFNQyxTQUFTRixnQkFBZ0JFLE1BQU0sSUFBSSxJQUFJSCx3REFBWUEsR0FBRztBQUVuRSxJQUFJSSxJQUF5QixFQUFjSCxnQkFBZ0JFLE1BQU0sR0FBR0E7QUFFcEUsaUVBQWVBLE1BQU1BLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZXF1ZW5jZS1nYW1lLy4vc3JjL2xpYi9wcmlzbWEudHM/MDFkNyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQcmlzbWFDbGllbnQgfSBmcm9tICdAcHJpc21hL2NsaWVudCc7XG5cbi8vIFByaXNtYUNsaWVudCBpcyBhdHRhY2hlZCB0byB0aGUgYGdsb2JhbGAgb2JqZWN0IGluIGRldmVsb3BtZW50IHRvIHByZXZlbnRcbi8vIGV4aGF1c3RpbmcgeW91ciBkYXRhYmFzZSBjb25uZWN0aW9uIGxpbWl0LlxuY29uc3QgZ2xvYmFsRm9yUHJpc21hID0gZ2xvYmFsIGFzIHVua25vd24gYXMgeyBwcmlzbWE6IFByaXNtYUNsaWVudCB9O1xuXG5leHBvcnQgY29uc3QgcHJpc21hID0gZ2xvYmFsRm9yUHJpc21hLnByaXNtYSB8fCBuZXcgUHJpc21hQ2xpZW50KCk7XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViAhPT0gJ3Byb2R1Y3Rpb24nKSBnbG9iYWxGb3JQcmlzbWEucHJpc21hID0gcHJpc21hO1xuXG5leHBvcnQgZGVmYXVsdCBwcmlzbWE7XG4iXSwibmFtZXMiOlsiUHJpc21hQ2xpZW50IiwiZ2xvYmFsRm9yUHJpc21hIiwiZ2xvYmFsIiwicHJpc21hIiwicHJvY2VzcyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/prisma.ts\n");

/***/ }),

/***/ "(rsc)/./src/utils/game.ts":
/*!***************************!*\
  !*** ./src/utils/game.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkForSequence: () => (/* binding */ checkForSequence),\n/* harmony export */   createDeck: () => (/* binding */ createDeck),\n/* harmony export */   createGameBoard: () => (/* binding */ createGameBoard),\n/* harmony export */   dealCards: () => (/* binding */ dealCards),\n/* harmony export */   generateRoomCode: () => (/* binding */ generateRoomCode),\n/* harmony export */   shuffleDeck: () => (/* binding */ shuffleDeck)\n/* harmony export */ });\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"(rsc)/./node_modules/uuid/dist/esm-node/v4.js\");\n\n// Generate a random 6-character room code\nfunction generateRoomCode() {\n    const characters = \"ABCDEFGHJKLMNPQRSTUVWXYZ23456789\"; // Removed similar looking characters\n    let result = \"\";\n    for(let i = 0; i < 6; i++){\n        result += characters.charAt(Math.floor(Math.random() * characters.length));\n    }\n    return result;\n}\n// Create a deck of cards\nfunction createDeck() {\n    const suits = [\n        \"hearts\",\n        \"diamonds\",\n        \"clubs\",\n        \"spades\"\n    ];\n    const ranks = [\n        \"A\",\n        \"2\",\n        \"3\",\n        \"4\",\n        \"5\",\n        \"6\",\n        \"7\",\n        \"8\",\n        \"9\",\n        \"10\",\n        \"J\",\n        \"Q\",\n        \"K\"\n    ];\n    const deck = [];\n    // Create two decks (104 cards)\n    for(let i = 0; i < 2; i++){\n        for (const suit of suits){\n            for (const rank of ranks){\n                const card = {\n                    suit,\n                    rank,\n                    id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__[\"default\"])()\n                };\n                // Mark Jacks\n                if (rank === \"J\") {\n                    card.isJack = true;\n                    // One-eyed Jacks: Jack of Hearts and Jack of Spades\n                    if (suit === \"hearts\" || suit === \"spades\") {\n                        card.jackType = \"one-eyed\";\n                    } else {\n                        card.jackType = \"two-eyed\";\n                    }\n                }\n                deck.push(card);\n            }\n        }\n    }\n    return deck;\n}\n// Shuffle a deck of cards\nfunction shuffleDeck(deck) {\n    const shuffled = [\n        ...deck\n    ];\n    for(let i = shuffled.length - 1; i > 0; i--){\n        const j = Math.floor(Math.random() * (i + 1));\n        [shuffled[i], shuffled[j]] = [\n            shuffled[j],\n            shuffled[i]\n        ];\n    }\n    return shuffled;\n}\n// Deal cards to players\nfunction dealCards(deck, numPlayers) {\n    const hands = [];\n    const cardsPerPlayer = 7; // For a 2-player game\n    for(let i = 0; i < numPlayers; i++){\n        hands.push([]);\n    }\n    for(let i = 0; i < cardsPerPlayer; i++){\n        for(let j = 0; j < numPlayers; j++){\n            if (deck.length > 0) {\n                const card = deck.pop();\n                hands[j].push(card);\n            }\n        }\n    }\n    return {\n        hands,\n        remainingDeck: deck\n    };\n}\n// Create the initial game board\nfunction createGameBoard() {\n    const board = [];\n    const size = 10; // 10x10 board\n    for(let i = 0; i < size; i++){\n        board.push([]);\n        for(let j = 0; j < size; j++){\n            const cell = {};\n            // Mark corner cells as free spaces\n            if (i === 0 && j === 0 || i === 0 && j === size - 1 || i === size - 1 && j === 0 || i === size - 1 && j === size - 1) {\n                cell.isCorner = true;\n            }\n            board[i].push(cell);\n        }\n    }\n    return board;\n}\n// Check if a sequence is formed\nfunction checkForSequence(board, row, col, player) {\n    const directions = [\n        [\n            0,\n            1\n        ],\n        [\n            1,\n            0\n        ],\n        [\n            1,\n            1\n        ],\n        [\n            1,\n            -1\n        ]\n    ];\n    for (const [dx, dy] of directions){\n        let count = 1;\n        let startRow = row;\n        let startCol = col;\n        let endRow = row;\n        let endCol = col;\n        // Check in positive direction\n        for(let i = 1; i < 5; i++){\n            const newRow = row + i * dx;\n            const newCol = col + i * dy;\n            if (newRow < 0 || newRow >= board.length || newCol < 0 || newCol >= board[0].length || board[newRow][newCol].chip !== player) {\n                break;\n            }\n            count++;\n            endRow = newRow;\n            endCol = newCol;\n        }\n        // Check in negative direction\n        for(let i = 1; i < 5; i++){\n            const newRow = row - i * dx;\n            const newCol = col - i * dy;\n            if (newRow < 0 || newRow >= board.length || newCol < 0 || newCol >= board[0].length || board[newRow][newCol].chip !== player) {\n                break;\n            }\n            count++;\n            startRow = newRow;\n            startCol = newCol;\n        }\n        if (count >= 5) {\n            return {\n                hasSequence: true,\n                sequence: {\n                    startRow,\n                    startCol,\n                    endRow,\n                    endCol\n                }\n            };\n        }\n    }\n    return {\n        hasSequence: false\n    };\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvdXRpbHMvZ2FtZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQW9DO0FBR3BDLDBDQUEwQztBQUNuQyxTQUFTRTtJQUNkLE1BQU1DLGFBQWEsb0NBQW9DLHFDQUFxQztJQUM1RixJQUFJQyxTQUFTO0lBQ2IsSUFBSyxJQUFJQyxJQUFJLEdBQUdBLElBQUksR0FBR0EsSUFBSztRQUMxQkQsVUFBVUQsV0FBV0csTUFBTSxDQUFDQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBS04sV0FBV08sTUFBTTtJQUMxRTtJQUNBLE9BQU9OO0FBQ1Q7QUFFQSx5QkFBeUI7QUFDbEIsU0FBU087SUFDZCxNQUFNQyxRQUFvQjtRQUFDO1FBQVU7UUFBWTtRQUFTO0tBQVM7SUFDbkUsTUFBTUMsUUFBb0I7UUFBQztRQUFLO1FBQUs7UUFBSztRQUFLO1FBQUs7UUFBSztRQUFLO1FBQUs7UUFBSztRQUFNO1FBQUs7UUFBSztLQUFJO0lBQzVGLE1BQU1DLE9BQWUsRUFBRTtJQUV2QiwrQkFBK0I7SUFDL0IsSUFBSyxJQUFJVCxJQUFJLEdBQUdBLElBQUksR0FBR0EsSUFBSztRQUMxQixLQUFLLE1BQU1VLFFBQVFILE1BQU87WUFDeEIsS0FBSyxNQUFNSSxRQUFRSCxNQUFPO2dCQUN4QixNQUFNSSxPQUFhO29CQUNqQkY7b0JBQ0FDO29CQUNBRSxJQUFJakIsZ0RBQU1BO2dCQUNaO2dCQUVBLGFBQWE7Z0JBQ2IsSUFBSWUsU0FBUyxLQUFLO29CQUNoQkMsS0FBS0UsTUFBTSxHQUFHO29CQUVkLG9EQUFvRDtvQkFDcEQsSUFBSUosU0FBUyxZQUFZQSxTQUFTLFVBQVU7d0JBQzFDRSxLQUFLRyxRQUFRLEdBQUc7b0JBQ2xCLE9BRUs7d0JBQ0hILEtBQUtHLFFBQVEsR0FBRztvQkFDbEI7Z0JBQ0Y7Z0JBRUFOLEtBQUtPLElBQUksQ0FBQ0o7WUFDWjtRQUNGO0lBQ0Y7SUFFQSxPQUFPSDtBQUNUO0FBRUEsMEJBQTBCO0FBQ25CLFNBQVNRLFlBQVlSLElBQVk7SUFDdEMsTUFBTVMsV0FBVztXQUFJVDtLQUFLO0lBQzFCLElBQUssSUFBSVQsSUFBSWtCLFNBQVNiLE1BQU0sR0FBRyxHQUFHTCxJQUFJLEdBQUdBLElBQUs7UUFDNUMsTUFBTW1CLElBQUlqQixLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBTUosQ0FBQUEsSUFBSTtRQUMxQyxDQUFDa0IsUUFBUSxDQUFDbEIsRUFBRSxFQUFFa0IsUUFBUSxDQUFDQyxFQUFFLENBQUMsR0FBRztZQUFDRCxRQUFRLENBQUNDLEVBQUU7WUFBRUQsUUFBUSxDQUFDbEIsRUFBRTtTQUFDO0lBQ3pEO0lBQ0EsT0FBT2tCO0FBQ1Q7QUFFQSx3QkFBd0I7QUFDakIsU0FBU0UsVUFBVVgsSUFBWSxFQUFFWSxVQUFrQjtJQUN4RCxNQUFNQyxRQUFrQixFQUFFO0lBQzFCLE1BQU1DLGlCQUFpQixHQUFHLHNCQUFzQjtJQUVoRCxJQUFLLElBQUl2QixJQUFJLEdBQUdBLElBQUlxQixZQUFZckIsSUFBSztRQUNuQ3NCLE1BQU1OLElBQUksQ0FBQyxFQUFFO0lBQ2Y7SUFFQSxJQUFLLElBQUloQixJQUFJLEdBQUdBLElBQUl1QixnQkFBZ0J2QixJQUFLO1FBQ3ZDLElBQUssSUFBSW1CLElBQUksR0FBR0EsSUFBSUUsWUFBWUYsSUFBSztZQUNuQyxJQUFJVixLQUFLSixNQUFNLEdBQUcsR0FBRztnQkFDbkIsTUFBTU8sT0FBT0gsS0FBS2UsR0FBRztnQkFDckJGLEtBQUssQ0FBQ0gsRUFBRSxDQUFDSCxJQUFJLENBQUNKO1lBQ2hCO1FBQ0Y7SUFDRjtJQUVBLE9BQU87UUFBRVU7UUFBT0csZUFBZWhCO0lBQUs7QUFDdEM7QUFFQSxnQ0FBZ0M7QUFDekIsU0FBU2lCO0lBQ2QsTUFBTUMsUUFBdUIsRUFBRTtJQUMvQixNQUFNQyxPQUFPLElBQUksY0FBYztJQUUvQixJQUFLLElBQUk1QixJQUFJLEdBQUdBLElBQUk0QixNQUFNNUIsSUFBSztRQUM3QjJCLE1BQU1YLElBQUksQ0FBQyxFQUFFO1FBQ2IsSUFBSyxJQUFJRyxJQUFJLEdBQUdBLElBQUlTLE1BQU1ULElBQUs7WUFDN0IsTUFBTVUsT0FBa0IsQ0FBQztZQUV6QixtQ0FBbUM7WUFDbkMsSUFDRSxNQUFPLEtBQUtWLE1BQU0sS0FDakJuQixNQUFNLEtBQUttQixNQUFNUyxPQUFPLEtBQ3hCNUIsTUFBTTRCLE9BQU8sS0FBS1QsTUFBTSxLQUN4Qm5CLE1BQU00QixPQUFPLEtBQUtULE1BQU1TLE9BQU8sR0FDaEM7Z0JBQ0FDLEtBQUtDLFFBQVEsR0FBRztZQUNsQjtZQUVBSCxLQUFLLENBQUMzQixFQUFFLENBQUNnQixJQUFJLENBQUNhO1FBQ2hCO0lBQ0Y7SUFFQSxPQUFPRjtBQUNUO0FBRUEsZ0NBQWdDO0FBQ3pCLFNBQVNJLGlCQUNkSixLQUFvQixFQUNwQkssR0FBVyxFQUNYQyxHQUFXLEVBQ1hDLE1BQTZCO0lBRTdCLE1BQU1DLGFBQWE7UUFDakI7WUFBQztZQUFHO1NBQUU7UUFDTjtZQUFDO1lBQUc7U0FBRTtRQUNOO1lBQUM7WUFBRztTQUFFO1FBQ047WUFBQztZQUFHLENBQUM7U0FBRTtLQUNSO0lBRUQsS0FBSyxNQUFNLENBQUNDLElBQUlDLEdBQUcsSUFBSUYsV0FBWTtRQUNqQyxJQUFJRyxRQUFRO1FBQ1osSUFBSUMsV0FBV1A7UUFDZixJQUFJUSxXQUFXUDtRQUNmLElBQUlRLFNBQVNUO1FBQ2IsSUFBSVUsU0FBU1Q7UUFFYiw4QkFBOEI7UUFDOUIsSUFBSyxJQUFJakMsSUFBSSxHQUFHQSxJQUFJLEdBQUdBLElBQUs7WUFDMUIsTUFBTTJDLFNBQVNYLE1BQU1oQyxJQUFJb0M7WUFDekIsTUFBTVEsU0FBU1gsTUFBTWpDLElBQUlxQztZQUV6QixJQUNFTSxTQUFTLEtBQUtBLFVBQVVoQixNQUFNdEIsTUFBTSxJQUNwQ3VDLFNBQVMsS0FBS0EsVUFBVWpCLEtBQUssQ0FBQyxFQUFFLENBQUN0QixNQUFNLElBQ3ZDc0IsS0FBSyxDQUFDZ0IsT0FBTyxDQUFDQyxPQUFPLENBQUNDLElBQUksS0FBS1gsUUFDL0I7Z0JBQ0E7WUFDRjtZQUVBSTtZQUNBRyxTQUFTRTtZQUNURCxTQUFTRTtRQUNYO1FBRUEsOEJBQThCO1FBQzlCLElBQUssSUFBSTVDLElBQUksR0FBR0EsSUFBSSxHQUFHQSxJQUFLO1lBQzFCLE1BQU0yQyxTQUFTWCxNQUFNaEMsSUFBSW9DO1lBQ3pCLE1BQU1RLFNBQVNYLE1BQU1qQyxJQUFJcUM7WUFFekIsSUFDRU0sU0FBUyxLQUFLQSxVQUFVaEIsTUFBTXRCLE1BQU0sSUFDcEN1QyxTQUFTLEtBQUtBLFVBQVVqQixLQUFLLENBQUMsRUFBRSxDQUFDdEIsTUFBTSxJQUN2Q3NCLEtBQUssQ0FBQ2dCLE9BQU8sQ0FBQ0MsT0FBTyxDQUFDQyxJQUFJLEtBQUtYLFFBQy9CO2dCQUNBO1lBQ0Y7WUFFQUk7WUFDQUMsV0FBV0k7WUFDWEgsV0FBV0k7UUFDYjtRQUVBLElBQUlOLFNBQVMsR0FBRztZQUNkLE9BQU87Z0JBQ0xRLGFBQWE7Z0JBQ2JDLFVBQVU7b0JBQ1JSO29CQUNBQztvQkFDQUM7b0JBQ0FDO2dCQUNGO1lBQ0Y7UUFDRjtJQUNGO0lBRUEsT0FBTztRQUFFSSxhQUFhO0lBQU07QUFDOUIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZXF1ZW5jZS1nYW1lLy4vc3JjL3V0aWxzL2dhbWUudHM/OWFhYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCB7IENhcmQsIENhcmRSYW5rLCBDYXJkU3VpdCwgQm9hcmRDZWxsIH0gZnJvbSAnQC90eXBlcy9nYW1lJztcblxuLy8gR2VuZXJhdGUgYSByYW5kb20gNi1jaGFyYWN0ZXIgcm9vbSBjb2RlXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVSb29tQ29kZSgpOiBzdHJpbmcge1xuICBjb25zdCBjaGFyYWN0ZXJzID0gJ0FCQ0RFRkdISktMTU5QUVJTVFVWV1hZWjIzNDU2Nzg5JzsgLy8gUmVtb3ZlZCBzaW1pbGFyIGxvb2tpbmcgY2hhcmFjdGVyc1xuICBsZXQgcmVzdWx0ID0gJyc7XG4gIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgcmVzdWx0ICs9IGNoYXJhY3RlcnMuY2hhckF0KE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGNoYXJhY3RlcnMubGVuZ3RoKSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuLy8gQ3JlYXRlIGEgZGVjayBvZiBjYXJkc1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZURlY2soKTogQ2FyZFtdIHtcbiAgY29uc3Qgc3VpdHM6IENhcmRTdWl0W10gPSBbJ2hlYXJ0cycsICdkaWFtb25kcycsICdjbHVicycsICdzcGFkZXMnXTtcbiAgY29uc3QgcmFua3M6IENhcmRSYW5rW10gPSBbJ0EnLCAnMicsICczJywgJzQnLCAnNScsICc2JywgJzcnLCAnOCcsICc5JywgJzEwJywgJ0onLCAnUScsICdLJ107XG4gIGNvbnN0IGRlY2s6IENhcmRbXSA9IFtdO1xuICBcbiAgLy8gQ3JlYXRlIHR3byBkZWNrcyAoMTA0IGNhcmRzKVxuICBmb3IgKGxldCBpID0gMDsgaSA8IDI7IGkrKykge1xuICAgIGZvciAoY29uc3Qgc3VpdCBvZiBzdWl0cykge1xuICAgICAgZm9yIChjb25zdCByYW5rIG9mIHJhbmtzKSB7XG4gICAgICAgIGNvbnN0IGNhcmQ6IENhcmQgPSB7XG4gICAgICAgICAgc3VpdCxcbiAgICAgICAgICByYW5rLFxuICAgICAgICAgIGlkOiB1dWlkdjQoKSxcbiAgICAgICAgfTtcbiAgICAgICAgXG4gICAgICAgIC8vIE1hcmsgSmFja3NcbiAgICAgICAgaWYgKHJhbmsgPT09ICdKJykge1xuICAgICAgICAgIGNhcmQuaXNKYWNrID0gdHJ1ZTtcbiAgICAgICAgICBcbiAgICAgICAgICAvLyBPbmUtZXllZCBKYWNrczogSmFjayBvZiBIZWFydHMgYW5kIEphY2sgb2YgU3BhZGVzXG4gICAgICAgICAgaWYgKHN1aXQgPT09ICdoZWFydHMnIHx8IHN1aXQgPT09ICdzcGFkZXMnKSB7XG4gICAgICAgICAgICBjYXJkLmphY2tUeXBlID0gJ29uZS1leWVkJztcbiAgICAgICAgICB9IFxuICAgICAgICAgIC8vIFR3by1leWVkIEphY2tzOiBKYWNrIG9mIERpYW1vbmRzIGFuZCBKYWNrIG9mIENsdWJzXG4gICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjYXJkLmphY2tUeXBlID0gJ3R3by1leWVkJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGRlY2sucHVzaChjYXJkKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBkZWNrO1xufVxuXG4vLyBTaHVmZmxlIGEgZGVjayBvZiBjYXJkc1xuZXhwb3J0IGZ1bmN0aW9uIHNodWZmbGVEZWNrKGRlY2s6IENhcmRbXSk6IENhcmRbXSB7XG4gIGNvbnN0IHNodWZmbGVkID0gWy4uLmRlY2tdO1xuICBmb3IgKGxldCBpID0gc2h1ZmZsZWQubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKTtcbiAgICBbc2h1ZmZsZWRbaV0sIHNodWZmbGVkW2pdXSA9IFtzaHVmZmxlZFtqXSwgc2h1ZmZsZWRbaV1dO1xuICB9XG4gIHJldHVybiBzaHVmZmxlZDtcbn1cblxuLy8gRGVhbCBjYXJkcyB0byBwbGF5ZXJzXG5leHBvcnQgZnVuY3Rpb24gZGVhbENhcmRzKGRlY2s6IENhcmRbXSwgbnVtUGxheWVyczogbnVtYmVyKTogeyBoYW5kczogQ2FyZFtdW10sIHJlbWFpbmluZ0RlY2s6IENhcmRbXSB9IHtcbiAgY29uc3QgaGFuZHM6IENhcmRbXVtdID0gW107XG4gIGNvbnN0IGNhcmRzUGVyUGxheWVyID0gNzsgLy8gRm9yIGEgMi1wbGF5ZXIgZ2FtZVxuICBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1QbGF5ZXJzOyBpKyspIHtcbiAgICBoYW5kcy5wdXNoKFtdKTtcbiAgfVxuICBcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBjYXJkc1BlclBsYXllcjsgaSsrKSB7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBudW1QbGF5ZXJzOyBqKyspIHtcbiAgICAgIGlmIChkZWNrLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3QgY2FyZCA9IGRlY2sucG9wKCkhO1xuICAgICAgICBoYW5kc1tqXS5wdXNoKGNhcmQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuICBcbiAgcmV0dXJuIHsgaGFuZHMsIHJlbWFpbmluZ0RlY2s6IGRlY2sgfTtcbn1cblxuLy8gQ3JlYXRlIHRoZSBpbml0aWFsIGdhbWUgYm9hcmRcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVHYW1lQm9hcmQoKTogQm9hcmRDZWxsW11bXSB7XG4gIGNvbnN0IGJvYXJkOiBCb2FyZENlbGxbXVtdID0gW107XG4gIGNvbnN0IHNpemUgPSAxMDsgLy8gMTB4MTAgYm9hcmRcbiAgXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7XG4gICAgYm9hcmQucHVzaChbXSk7XG4gICAgZm9yIChsZXQgaiA9IDA7IGogPCBzaXplOyBqKyspIHtcbiAgICAgIGNvbnN0IGNlbGw6IEJvYXJkQ2VsbCA9IHt9O1xuICAgICAgXG4gICAgICAvLyBNYXJrIGNvcm5lciBjZWxscyBhcyBmcmVlIHNwYWNlc1xuICAgICAgaWYgKFxuICAgICAgICAoaSA9PT0gMCAmJiBqID09PSAwKSB8fFxuICAgICAgICAoaSA9PT0gMCAmJiBqID09PSBzaXplIC0gMSkgfHxcbiAgICAgICAgKGkgPT09IHNpemUgLSAxICYmIGogPT09IDApIHx8XG4gICAgICAgIChpID09PSBzaXplIC0gMSAmJiBqID09PSBzaXplIC0gMSlcbiAgICAgICkge1xuICAgICAgICBjZWxsLmlzQ29ybmVyID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgYm9hcmRbaV0ucHVzaChjZWxsKTtcbiAgICB9XG4gIH1cbiAgXG4gIHJldHVybiBib2FyZDtcbn1cblxuLy8gQ2hlY2sgaWYgYSBzZXF1ZW5jZSBpcyBmb3JtZWRcbmV4cG9ydCBmdW5jdGlvbiBjaGVja0ZvclNlcXVlbmNlKFxuICBib2FyZDogQm9hcmRDZWxsW11bXSxcbiAgcm93OiBudW1iZXIsXG4gIGNvbDogbnVtYmVyLFxuICBwbGF5ZXI6ICdwbGF5ZXIxJyB8ICdwbGF5ZXIyJ1xuKTogeyBoYXNTZXF1ZW5jZTogYm9vbGVhbjsgc2VxdWVuY2U/OiB7IHN0YXJ0Um93OiBudW1iZXI7IHN0YXJ0Q29sOiBudW1iZXI7IGVuZFJvdzogbnVtYmVyOyBlbmRDb2w6IG51bWJlciB9IH0ge1xuICBjb25zdCBkaXJlY3Rpb25zID0gW1xuICAgIFswLCAxXSwgICAvLyBob3Jpem9udGFsXG4gICAgWzEsIDBdLCAgIC8vIHZlcnRpY2FsXG4gICAgWzEsIDFdLCAgIC8vIGRpYWdvbmFsIGRvd24tcmlnaHRcbiAgICBbMSwgLTFdLCAgLy8gZGlhZ29uYWwgZG93bi1sZWZ0XG4gIF07XG4gIFxuICBmb3IgKGNvbnN0IFtkeCwgZHldIG9mIGRpcmVjdGlvbnMpIHtcbiAgICBsZXQgY291bnQgPSAxO1xuICAgIGxldCBzdGFydFJvdyA9IHJvdztcbiAgICBsZXQgc3RhcnRDb2wgPSBjb2w7XG4gICAgbGV0IGVuZFJvdyA9IHJvdztcbiAgICBsZXQgZW5kQ29sID0gY29sO1xuICAgIFxuICAgIC8vIENoZWNrIGluIHBvc2l0aXZlIGRpcmVjdGlvblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNTsgaSsrKSB7XG4gICAgICBjb25zdCBuZXdSb3cgPSByb3cgKyBpICogZHg7XG4gICAgICBjb25zdCBuZXdDb2wgPSBjb2wgKyBpICogZHk7XG4gICAgICBcbiAgICAgIGlmIChcbiAgICAgICAgbmV3Um93IDwgMCB8fCBuZXdSb3cgPj0gYm9hcmQubGVuZ3RoIHx8XG4gICAgICAgIG5ld0NvbCA8IDAgfHwgbmV3Q29sID49IGJvYXJkWzBdLmxlbmd0aCB8fFxuICAgICAgICBib2FyZFtuZXdSb3ddW25ld0NvbF0uY2hpcCAhPT0gcGxheWVyXG4gICAgICApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvdW50Kys7XG4gICAgICBlbmRSb3cgPSBuZXdSb3c7XG4gICAgICBlbmRDb2wgPSBuZXdDb2w7XG4gICAgfVxuICAgIFxuICAgIC8vIENoZWNrIGluIG5lZ2F0aXZlIGRpcmVjdGlvblxuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgNTsgaSsrKSB7XG4gICAgICBjb25zdCBuZXdSb3cgPSByb3cgLSBpICogZHg7XG4gICAgICBjb25zdCBuZXdDb2wgPSBjb2wgLSBpICogZHk7XG4gICAgICBcbiAgICAgIGlmIChcbiAgICAgICAgbmV3Um93IDwgMCB8fCBuZXdSb3cgPj0gYm9hcmQubGVuZ3RoIHx8XG4gICAgICAgIG5ld0NvbCA8IDAgfHwgbmV3Q29sID49IGJvYXJkWzBdLmxlbmd0aCB8fFxuICAgICAgICBib2FyZFtuZXdSb3ddW25ld0NvbF0uY2hpcCAhPT0gcGxheWVyXG4gICAgICApIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGNvdW50Kys7XG4gICAgICBzdGFydFJvdyA9IG5ld1JvdztcbiAgICAgIHN0YXJ0Q29sID0gbmV3Q29sO1xuICAgIH1cbiAgICBcbiAgICBpZiAoY291bnQgPj0gNSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaGFzU2VxdWVuY2U6IHRydWUsXG4gICAgICAgIHNlcXVlbmNlOiB7XG4gICAgICAgICAgc3RhcnRSb3csXG4gICAgICAgICAgc3RhcnRDb2wsXG4gICAgICAgICAgZW5kUm93LFxuICAgICAgICAgIGVuZENvbCxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuICB9XG4gIFxuICByZXR1cm4geyBoYXNTZXF1ZW5jZTogZmFsc2UgfTtcbn1cbiJdLCJuYW1lcyI6WyJ2NCIsInV1aWR2NCIsImdlbmVyYXRlUm9vbUNvZGUiLCJjaGFyYWN0ZXJzIiwicmVzdWx0IiwiaSIsImNoYXJBdCIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsImxlbmd0aCIsImNyZWF0ZURlY2siLCJzdWl0cyIsInJhbmtzIiwiZGVjayIsInN1aXQiLCJyYW5rIiwiY2FyZCIsImlkIiwiaXNKYWNrIiwiamFja1R5cGUiLCJwdXNoIiwic2h1ZmZsZURlY2siLCJzaHVmZmxlZCIsImoiLCJkZWFsQ2FyZHMiLCJudW1QbGF5ZXJzIiwiaGFuZHMiLCJjYXJkc1BlclBsYXllciIsInBvcCIsInJlbWFpbmluZ0RlY2siLCJjcmVhdGVHYW1lQm9hcmQiLCJib2FyZCIsInNpemUiLCJjZWxsIiwiaXNDb3JuZXIiLCJjaGVja0ZvclNlcXVlbmNlIiwicm93IiwiY29sIiwicGxheWVyIiwiZGlyZWN0aW9ucyIsImR4IiwiZHkiLCJjb3VudCIsInN0YXJ0Um93Iiwic3RhcnRDb2wiLCJlbmRSb3ciLCJlbmRDb2wiLCJuZXdSb3ciLCJuZXdDb2wiLCJjaGlwIiwiaGFzU2VxdWVuY2UiLCJzZXF1ZW5jZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/utils/game.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/ws","vendor-chunks/socket.io-parser","vendor-chunks/engine.io-parser","vendor-chunks/@socket.io","vendor-chunks/ms","vendor-chunks/supports-color","vendor-chunks/uuid","vendor-chunks/has-flag","vendor-chunks/engine.io","vendor-chunks/socket.io","vendor-chunks/socket.io-adapter","vendor-chunks/negotiator","vendor-chunks/mime-db","vendor-chunks/vary","vendor-chunks/object-assign","vendor-chunks/mime-types","vendor-chunks/cors","vendor-chunks/cookie","vendor-chunks/base64id","vendor-chunks/accepts"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fsocket%2Froute&page=%2Fapi%2Fsocket%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fsocket%2Froute.ts&appDir=%2FUsers%2Fshaswatraj%2FDesktop%2Fopen-source%2Fsequence%2Fsrc%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fshaswatraj%2FDesktop%2Fopen-source%2Fsequence&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();